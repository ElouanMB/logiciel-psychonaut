:root{
	/* Backgrounds - Noir et gris très foncé */
	--bg:#0a0a0a; --bg-alt:#111111; --surface:#1a1a1a; --card:#1f1f1f;
	
	/* Text colors - Gris clair et blanc */
	--text:#e8e8e8; --text-muted:#a8a8a8; --text-dim:#808080; --text-highlight: #d5d5d5;

	/* Brand colors - Accents seulement */
	--violet:#583392; --violet-light:#6B63AB;
	--indigo:#3A346B; --indigo-light:#564F93;
	--pink-accent: #C56EBA; /* Rose pour les accents */
	--yellow:#E4E774;
	
	/* Semantic colors */
	--primary:var(--violet); --primary-hover:var(--indigo);
	--accent:var(--indigo-light); --accent-hover:var(--indigo);
	--info:var(--indigo); --success:#10b981; --warning:var(--yellow); --danger:#ef4444;
	
	/* UI elements - Gris neutre + Rose pour le hover */
	--border:#2a2a2a; --border-hover:var(--pink-accent); --border-accent:#3a3a3a;
	--muted:var(--text-muted);
	
	/* Chip colors */
	--chip-druglab:#E4E774; --chip-autre:#10b981; --chip-unknown:#808080;
}
*{box-sizing:border-box}
body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; padding: 0; color: var(--text); background: #0a0a0a; }
a{ color: var(--indigo-light); text-decoration: none; transition: color .2s; }
a:hover{ color: var(--violet); text-decoration: underline; }

.site-header{ display:flex; align-items:center; justify-content:space-between; padding: 12px 16px; background: rgba(15,15,15,.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); position: sticky; top:0; z-index: 10; box-shadow: 0 2px 10px rgba(0,0,0,.5); }
.brand{ display:flex; align-items:center; gap:12px; flex: 1; }
.brand .logo{ height: 36px; width:auto; filter: drop-shadow(0 0 8px rgba(0,0,0,.35)); }
.brand-text .title{ font-weight: 700; letter-spacing: .2px; color: var(--text); }
.brand-text .subtitle{ color: var(--text-muted); font-size: .9rem; }

.center-nav { display: flex; justify-content: center; gap: 32px; flex: 2; }
.nav-icon-link { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-muted); text-decoration: none; transition: color .2s; font-size: .75rem; font-weight: 500; white-space: nowrap; }
.nav-icon-link:hover, .nav-icon-link.active { color: var(--pink-accent); }
.nav-icon-link i { width: 22px; height: 22px; }

.nav-actions{ display: flex; justify-content: flex-end; flex: 1; }
.nav-actions .link{ margin-left: 12px; color: var(--text-muted); transition: color .2s; }
.nav-actions .link:hover{ color: var(--text); }
.nav-actions .link i { width: 22px; height: 22px; }

.hero{ position: relative; height: 180px; background: #111111 url('/ressources/banner.svg') center/cover no-repeat; display:flex; align-items:center; justify-content:center; }
.hero-overlay{ position:absolute; inset:0; background: radial-gradient(ellipse at center, rgba(88,51,146,.05) 0%, rgba(88,51,146,.02) 40%, rgba(10,10,10,.8) 100%); }
.hero-content{ position: relative; text-align:center; padding: 12px 16px; }
.hero-title{ margin: 0; font-size: 1.6rem; color: var(--text); }
.hero-sub{ margin: 8px 0 0; color: var(--text-muted); }

/* Layout */
.container{ max-width: 1200px; margin: 0 auto; padding: 8px 12px 24px; }
.grid{ display: grid; grid-template-columns: 1fr; gap: 16px; }
@media (min-width: 980px){
	.grid{ grid-template-columns: 400px 1fr; }
}

.card { background: rgba(31,31,31,.95); backdrop-filter: blur(10px); margin: 16px; padding: 16px; border: 1px solid var(--border); border-radius: 14px; box-shadow: 0 8px 24px rgba(0,0,0,.4), 0 2px 8px rgba(0,0,0,.25); transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease; }
.card:hover{ transform: translateY(-1px); box-shadow: 0 10px 30px rgba(0,0,0,.5), 0 3px 10px rgba(0,0,0,.3); border-color: var(--border-hover); }
.card-compact { align-self: start; }
label { display: block; margin: 8px 0; color: var(--muted); }
input { padding: 8px 10px; margin-left: 8px; background: rgba(30,30,30,.8); color: var(--text); border:1px solid var(--border); border-radius: 6px; }
select { padding: 8px 10px; background: rgba(30,30,30,.8); color: var(--text); border:1px solid var(--border); border-radius: 6px; }
.btn{ padding: 10px 14px; border-radius: 8px; border: 1px solid transparent; cursor: pointer; background: var(--violet); color: white; transition: all .2s; }
.btn:hover{ background: var(--indigo); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(88,51,146,.3); }
.log { display:none; }
.run-status{ display: grid; gap: 8px; margin-top: 10px; }
.progress{ display:none; position: relative; height: 8px; background: rgba(30,30,30,.8); border:1px solid var(--border); border-radius: 999px; overflow: hidden; }
.progress .bar{ position: absolute; inset: 0 auto 0 0; width: 0%; background: var(--violet); border-radius: inherit; transition: width .4s ease; }
.progress.error .bar{ background: #ef4444; }
.muted { color: var(--muted); }
ul { margin: 6px 0 6px 20px; }

.files-header{ display:flex; align-items:center; justify-content:space-between; gap: 12px; }
.files-toolbar{ display:flex; align-items:center; gap: 8px; }
.files-toolbar input[type="search"]{ margin-left: 0; min-width: 200px; }

/* Stat chips */
.chip.info{ background: rgba(107,99,171,.15); color: var(--indigo-light); border-color: rgba(107,99,171,.3); }

.chip{ display:inline-block; padding:2px 8px; border-radius:999px; font-size:.78rem; line-height:1.6; border:1px solid rgba(255,255,255,.1); margin-left:6px; }
.chip.druglab{ background: rgba(228,231,116,.15); color: var(--yellow); border-color:rgba(228,231,116,.3); }
.chip.autre{ background: rgba(16,185,129,.15); color:#34d399; border-color:rgba(16,185,129,.3); }
.chip.unknown{ background: rgba(128,128,128,.15); color: var(--text-muted); border-color:rgba(128,128,128,.3); }
/* Labels spécifiques */
.chip.atpidf{ background: rgba(239,68,68,.15); color:#fca5a5; border-color: rgba(239,68,68,.35); }
.chip.checklab{ background: rgba(16,185,129,.15); color:#34d399; border-color: rgba(16,185,129,.35); }
.chip.sintes{ background: rgba(128,128,128,.15); color: var(--text-muted); border-color: rgba(128,128,128,.35); }

.summary{ margin: 8px 0 12px; color: var(--muted); }

/* Global stats band */
.stats-band{ display:flex; align-items:center; gap: 16px; padding: 10px 16px; background: rgba(20,20,20,.9); border-bottom:1px solid var(--border); border-top: 1px solid var(--border); box-shadow: inset 0 1px 0 rgba(255,255,255,.02); }
.stats-band .pill{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: rgba(30,30,30,.8); border:1px solid var(--border); color: var(--text); font-weight: 600; }
.stats-band .muted{ margin-left: auto; }

/* Files list modern styling */
.files-list{ list-style: none; padding: 0; margin: 0; }
.file-item{ display:grid; grid-template-columns: 1fr auto; row-gap:8px; align-items:center; padding: 12px 14px; border:1px solid var(--border); border-radius: 12px; margin: 10px 0; background: rgba(31,31,31,.8); transition: background .2s, border-color .2s, transform .05s; }
.file-item:hover{ background: rgba(42,42,42,.8); border-color: var(--border-hover); }
.file-item:active{ transform: translateY(1px); }
.file-link{ color: var(--text); text-decoration: none; }
.file-link .name{ font-weight: 600; }
.file-actions{ display:flex; align-items:center; gap: 8px; grid-column: 2; }
.file-summary{ grid-column: 1 / -1; color: var(--muted); font-size:.9rem; }
.file-summary .label-chips{ display:flex; flex-wrap: wrap; gap: 6px; margin-top: 6px; }
.icon-btn{ display:inline-flex; align-items:center; justify-content:center; height: 36px; width: 36px; border-radius: 8px; background: rgba(30,30,30,.8); border:1px solid var(--border); color: var(--text); cursor: pointer; transition: all .2s; }
.icon-btn:hover, .icon-btn.active{ background: rgba(197, 110, 186, .15); border-color: var(--border-hover); color: var(--text-highlight); }
.icon-btn.danger{ border-color:#5b1f1f; background:#1b0f12; color: var(--text-muted); }
.icon-btn.danger:hover{ border-color:#ef4444; background: rgba(239, 68, 68, .15); color: #ef4444; }

/* Preview collapsible */
.preview{ grid-column: 1 / -1; background: rgba(15,15,15,.8); border:1px solid var(--border); border-radius: 10px; padding: 10px 12px; display:none; }
.preview.open{ display:block; }
.preview .kv{ display:flex; gap: 8px; flex-wrap: wrap; }
.preview .kv .pill{ background: rgba(30,30,30,.8); border:1px solid var(--border); padding:4px 8px; border-radius: 999px; }

/* Details panel */
.details-panel{ background: rgba(31,31,31,.98); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 14px; padding: 20px; margin: 16px; box-shadow: 0 8px 24px rgba(0,0,0,.4); }
.details-header{ display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border); }
.details-header h2{ margin: 0; font-size: 1.3rem; color: var(--text); }
.details-filters{ display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; }
.details-filters select{ flex: 1; min-width: 180px; }
.details-content{ display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; max-height: 70vh; }

/* Thread categories */
.thread-category{ margin-bottom: 0; max-height: 70vh; overflow-y: auto; padding-right: 8px; }
.thread-category h3{ color: var(--text-highlight); font-size: 1.1rem; margin: 0 0 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 8px; position: sticky; top: 0; background: rgba(31,31,31,.98); z-index: 1; }
.thread-category h3.cat-results { color: var(--success); }
.thread-category h3.cat-no-results { color: var(--warning); }
.thread-category h3.cat-closed { color: var(--text-muted); }
.thread-category h3 .count{ color: var(--muted); font-size: 0.9rem; font-weight: 400; }
/* Custom scrollbar for categories */
.thread-category::-webkit-scrollbar{ width: 6px; }
.thread-category::-webkit-scrollbar-track{ background: rgba(20,20,20,.6); border-radius: 3px; }
.thread-category::-webkit-scrollbar-thumb{ background: rgba(107,99,171,.3); border-radius: 3px; }
.thread-category::-webkit-scrollbar-thumb:hover{ background: rgba(107,99,171,.5); }
.thread-category.empty{ display: flex; align-items: center; justify-content: center; color: var(--muted); font-size: 0.9rem; min-height: 200px; }
.thread-item{ background: rgba(26,26,26,.8); border: 1px solid var(--border); border-radius: 10px; padding: 12px 14px; margin: 8px 0; transition: background .2s, border-color .2s; }
.thread-item:hover{ background: rgba(42,42,42,.9); border-color: var(--border-hover); }
.thread-title{ font-weight: 600; font-size: 1rem; margin: 0 0 6px; }
.thread-title a{ color: var(--text); }
.thread-title a:hover{ color: var(--violet); }
.thread-meta{ display: flex; gap: 12px; flex-wrap: wrap; align-items: center; font-size: .85rem; color: var(--muted); margin: 6px 0; }
.thread-meta .meta-item{ display: flex; align-items: center; gap: 4px; }
.thread-meta .meta-item i{ width: 14px; height: 14px; }
.thread-identifiers{ margin-top: 8px; }
.thread-identifiers .identifier{ display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; margin: 4px 4px 4px 0; border-radius: 8px; font-size: .85rem; background: rgba(107,99,171,.15); border: 1px solid rgba(107,99,171,.3); color: var(--indigo-light); }
.thread-identifiers .identifier.found{ background: rgba(16,185,129,.1); border-color: rgba(16,185,129,.3); color: #34d399; }
.thread-identifiers .identifier.notfound{ background: rgba(239,68,68,.1); border-color: rgba(239,68,68,.3); color: #fca5a5; }
.thread-identifiers .identifier a{ color: inherit; opacity: .9; }
.thread-identifiers .identifier a:hover{ opacity: 1; }

/* Bouton rédiger */
.btn-write-report{ display: inline-flex; align-items: center; gap: 4px; padding: 3px 8px; margin-left: 8px; background: var(--violet); color: white; border: none; border-radius: 6px; font-size: .75rem; font-weight: 600; cursor: pointer; transition: all .2s; }
.btn-write-report:hover{ background: var(--indigo); transform: translateY(-1px); }
.btn-write-report i{ width: 12px; height: 12px; }

.status-badge{ display: inline-flex; align-items: center; gap: 4px; padding: 3px 8px; border-radius: 999px; font-size: .75rem; font-weight: 600; }
.status-badge.closed{ background: rgba(128,128,128,.15); color: var(--text-muted); border: 1px solid rgba(128,128,128,.3); }
.status-badge.open{ background: rgba(16,185,129,.15); color: #34d399; border: 1px solid rgba(16,185,129,.3); }

/* Responsive: stack categories on small screens */
@media (max-width: 1200px) {
  .details-content{ grid-template-columns: 1fr; }
  .thread-category{ max-height: 50vh; }
}
